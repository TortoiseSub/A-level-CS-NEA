//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Variable Setup
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

let cameraZoom = 3
let camSprite

let camCorners = []


//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Initialise camera sprite and settings 
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function loadCameraData(){
	// Instantiate a camera sprite to follow the player in order to smooth out the camera movement as the camera object can not use the moveTo function
    camSprite = new playingSpriteGroup.Sprite(0,0,2)
	camSprite.collider = `n`
	camSprite.rotationLock = true
	camSprite.friction = 0
	camSprite.bounciness = 0
    camSprite.visible = false

	camera.zoom = cameraZoom
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Update camera corner position array
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function updateCameraCorners(){
	// Find the world coordinates of each corner of the camera view 
	camCorners = [
		[(camSprite.x - (width/(2*cameraZoom))),(camSprite.y - (height/(2*cameraZoom)))], //Top Left
		[(camSprite.x + (width/(2*cameraZoom))),(camSprite.y - (height/(2*cameraZoom)))], //Top Right
		[(camSprite.x - (width/(2*cameraZoom))),(camSprite.y + (height/(2*cameraZoom)))], //Bottom Left
		[(camSprite.x + (width/(2*cameraZoom))),(camSprite.y + (height/(2*cameraZoom)))], //Bottom Right
	]
}

//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Move camera Sprite to player position
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

function moveCamera(){
	// Move a camera sprite towards the player position at a speed based on distance to the player to smooth out camera movement 

	let d = findDistance(camSprite, player)
	// If distance becomes too large, teleport camera to player
	if(d > 5000){ 
		camSprite.x = player.x //Teleports the camera to the player if there has been a case where the camera is unable to follow the player
		camSprite.y = player.y
	}
	// Set camera speed based on distance to the player 
	else if(d > 10){
		s = 1.1**(d/2)
	}
	// If the player is less than 10 pixels away, do nothing
	else{
		s = 0 // Prevents the camera from jittering when close to the player
	}

	//Set the camera speed and move towards the player
	camSprite.speed = s
	camSprite.moveTo(player)

	//Set the camera position to follow the camera Sprite
	camera.x = camSprite.x
	camera.y = camSprite.y
}